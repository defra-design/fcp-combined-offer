{% extends "layouts/main.html" %}

{% block pageTitle %}
  ALBs HT V2 – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}


{% block beforeContent %}

{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}

{{ govukPhaseBanner({
  tag: {
    text: "Prototype"
  },
  html: 'This is a prototype used for testing purposes only.'
}) }}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:window.history.back()"
  }) }}

 <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
  <div class="govuk-grid-row" id="header" style="padding-top:16px;">
        <div class="govuk-grid-column-two-thirds">
          <h3 class="govuk-heading-m" style="margin-bottom: 8px;">Smith Farm Ltd</h3>
          <p class="govuk-hint sbi-number" style="margin-bottom: 8px;">Single Business Identifier (SBI): 123456789</p>
        </div>
        <div class="govuk-grid-column-one-third">
            <form class="form" action="saved" method="post">
            <button type="submit" class="govuk-button govuk-button--secondary" 
            style="float:right; margin-bottom: 8px;"data-module="govuk-button">
              Save and return later
            </button>
          </form>
   </div>
    </div>
      <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

{% endblock %}

{% block content %}

<div class="govuk-width-container">
<main class="govuk-main-wrapper">

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

   <span class="govuk-caption-l">FG1: Fencing</span>
          <h1 class="govuk-heading-l">Confirm capital item costs</h1>

    <div class="govuk-form-group">
      <p class="govuk-body govuk-!-margin-bottom-1">Cost of item</p>
      <input class="govuk-input" id="event-name" name="eventName" type="text" value="">
    </div>
    <div class="govuk-form-group">
      <p class="govuk-body govuk-!-margin-bottom-1">Percentage (%)</p>
      <input class="govuk-input" id="event-name" name="eventName" type="text" value="">
    </div>


    <h4 class="govuk-heading-m" style="margin-bottom: 30px">Select the parcels you want to apply this cost to</h4>

   

<div class="govuk-tabs" data-module="govuk-tabs" >
  <h2 class="govuk-tabs__title">
    Contents
  </h2>
  <ul class="govuk-tabs__list">
    <li class="govuk-tabs__list-item ">
      <a class="govuk-tabs__tab" href="#prescription-not-applied">
        Actual cost not applied
      </a>
    </li>
    <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
      <a class="govuk-tabs__tab" href="#prescription-applied">
        Actual cost applied
      </a>
    </li>
  </ul>
  


    <div class="govuk-tabs__panel" style="border: none; margin-left: -20px; margin-right: -20px" id="prescription-not-applied">
        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
            <div class="govuk-checkboxes__item" style="padding-bottom: 30px;">
                <input class="govuk-checkboxes__input" id="select-all" type="checkbox">
                <label class="govuk-label govuk-checkboxes__label" for="select-all">
                    Select all parcels
                </label>
            </div>
        </div>
        
        <table class="govuk-table" data-module="moj-sortable-table" data-module="moj-multi-select" data-multi-select-checkbox="#select-all">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                <input name="parcel" class="govuk-checkboxes__input" id="select-all-2" type="checkbox">
                                <label class="govuk-label govuk-checkboxes__label" for="select-all-2"></label>
                            </div>
                        </div>
                    </th>
                    <th scope="col" class="govuk-table__header" aria-sort="ascending">Parcel number</th>
                    <th scope="col" class="govuk-table__header" aria-sort="none">Quantity</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                          <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="007">SE7023 5004</td>
                    <td class="govuk-table__cell" data-sort-value="007">2.54 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                       <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="008">SE7023 5005</td>
                    <td class="govuk-table__cell" data-sort-value="008">234.34 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                       <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="009">SE7023 5006</td>
                    <td class="govuk-table__cell" data-sort-value="009">26.43 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                      <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="010">SE7023 5007</td>
                    <td class="govuk-table__cell" data-sort-value="010">5.32 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                     <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="011">SE7023 5008</td>
                    <td class="govuk-table__cell" data-sort-value="011">0.73 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                   <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="012">SE7023 5009</td>
                    <td class="govuk-table__cell" data-sort-value="012">3.45 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                         <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="013">SE7023 5010</td>
                    <td class="govuk-table__cell" data-sort-value="013">6.21 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                              <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="014">SE7023 5011</td>
                    <td class="govuk-table__cell" data-sort-value="014">12.43 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="015">SE7023 5012</td>
                    <td class="govuk-table__cell" data-sort-value="015">45.20 hectares</td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell app-custom-class">
                        <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                             <input class="govuk-checkboxes__input" id="organisation" name="parcel" type="checkbox" value="hmrc">
            <label class="govuk-label govuk-checkboxes__label" for="organisation"></label>
                            </div>
                        </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="016">SE7023 5013</td>
                    <td class="govuk-table__cell" data-sort-value="016">9.12 hectares</td>
                </tr>
            </tbody>
        </table>



<nav class="moj-pagination" aria-label="Pagination navigation">

  <ul class="moj-pagination__list">

    <li class="moj-pagination__item moj-pagination__item--active" aria-label="Page 1 of 4" aria-current="page">1</li>

    <li class="moj-pagination__item"><a class="moj-pagination__link" href="#" aria-label="Page 2 of 4">2</a></li>

    <li class="moj-pagination__item moj-pagination__item--dots">…</li>

    <li class="moj-pagination__item"><a class="moj-pagination__link" href="#" aria-label="Page 4 of 4">4</a></li>

    <li class="moj-pagination__item  moj-pagination__item--next">
      <a class="moj-pagination__link" href="#">Next<span class="govuk-visually-hidden"> page</span></a>
    </li>
  </ul>
  <p class="moj-pagination__results">Showing <b>1</b> to <b>10</b> of <b>45</b> results</p>
</nav>

  </div>
  
<div class="govuk-tabs__panel" id="prescription-applied" style="border: none; margin-left: -20px; margin-right: -20px">
      <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
      
    </div>
    
    <table class="govuk-table" data-module="moj-sortable-table" data-module="moj-multi-select" data-multi-select-checkbox="#select-all">

  <thead class="govuk-table__head">
    <tr class="govuk-table__row">

      <th scope="col" class="govuk-table__header">
    </th>

      <th scope="col" class="govuk-table__header"></th>

      <th scope="col" class="govuk-table__header"></th>

      

    </tr>
  </thead>

  <tbody class="govuk-table__body">
     <tr class="govuk-table__row">
      <td class="govuk-table__cell" style="text-align: center;" colspan="3" >No land parcels</td>
    </tr>
  </tbody>
</table>

<div class= "pagination-container">
<p class="pagination-text" style="vertical-align: middle;">Showing <b>0</b> to <b>0</b> of <b>0</b> results</p>
</div>

  </div>
</div>


 <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
 

    <form class="form" action="actual-costs-saved" method="post">
      <button type="submit" class="govuk-button govuk-button--primary" data-module="govuk-button">
    Save changes
  </button>
  </form>

    <form class="form" action="capital-item-actual" method="post">
      <button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">
    Continue
  </button>
  </form>

</div>
</div>

</main>
</div>

<!-- Feedback component -->
<script>
  document.querySelectorAll('.govuk-details__summary').forEach(function(summary) {
    summary.addEventListener('click', function(event) {
      event.preventDefault();
      
      // Find the parent row
      const row = event.target.closest('tr');
      
      // Check if the expanded content already exists
      if (row.nextElementSibling && row.nextElementSibling.classList.contains('expanded-content')) {
        // Remove the expanded content if it already exists
        row.nextElementSibling.remove();
        row.classList.remove('hide-border'); // Remove the class to show the border again
        summary.parentNode.removeAttribute('open'); // Close the details element
        summary.parentNode.querySelector('.govuk-details__text').style.display = ''; // Show the original details text
        
        // Remove the border-bottom style from each td
        row.querySelectorAll('td').forEach(function(td) {
          td.style.borderBottom = '';
        });
      } else {
        // Get the content from the details text
        const detailsText = row.querySelector('.govuk-details__text').innerHTML;
        // Create a new row for the expanded content
        const expandedRow = document.createElement('tr');
        expandedRow.classList.add('expanded-content');
        
        // Create a cell that spans all columns
        const expandedCell = document.createElement('td');
        expandedCell.colSpan = row.children.length;
        expandedCell.innerHTML = `<div class="govuk-details__text">${detailsText}</div>`;
        
        // Append the cell to the new row
        expandedRow.appendChild(expandedCell);
        
        // Insert the new row after the current row
        row.parentNode.insertBefore(expandedRow, row.nextSibling);
        row.classList.add('hide-border'); // Add the class to hide the border
        summary.parentNode.setAttribute('open', ''); // Open the details element
        summary.parentNode.querySelector('.govuk-details__text').style.display = 'none'; // Hide the original details text
        
        // Add the border-bottom style to each td
        row.querySelectorAll('td').forEach(function(td) {
          td.style.borderBottom = 'none';
        });
      }
    });
  });
</script>

<!-- Select all and checkboxes triggers actions menu bar component -->
<script>
    // Function to handle the select-all functionality
    function handleSelectAll(selectAllId, checkboxName) {
        document.getElementById(selectAllId).addEventListener('change', function() {
            var checkboxes = document.querySelectorAll(`input[name="${checkboxName}"]`);
            for (var checkbox of checkboxes) {
                checkbox.checked = this.checked;
            }
            toggleRemoveButton();
        });
    }

    // Initialize select-all functionality for both sets of checkboxes
    handleSelectAll('select-all', 'parcel');
    handleSelectAll('select-all-2', 'parcel');

    // Function to toggle the remove button visibility
    function toggleRemoveButton() {
        var removeButton = document.getElementById('remove-prescription');
        var parcelCheckboxes = document.querySelectorAll('input[name="parcel"]');
        var anyChecked = Array.from(parcelCheckboxes).some(checkbox => checkbox.checked);
        if (anyChecked) {
            removeButton.classList.remove('hidden');
        } else {
            removeButton.classList.add('hidden');
        }
    }

    // Add change event listeners to individual checkboxes to toggle the remove button
    var parcelCheckboxes = document.querySelectorAll('input[name="parcel"]');
    for (var checkbox of parcelCheckboxes) {
        checkbox.addEventListener('change', toggleRemoveButton);
    }
</script>

{% endblock %}
